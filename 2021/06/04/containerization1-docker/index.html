

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/jackey-l/blog_static@master/img/favicon.png">
  <link rel="icon" href="https://cdn.jsdelivr.net/gh/jackey-l/blog_static@master/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="123">
  <meta name="author" content="Vincent Lee">
  <meta name="keywords" content="">
  
  <title>(一)容器化实战--docker探索 - Vincent Lee</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":120,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"https://cdn.jsdelivr.net/gh/jackey-l/blog_static@master/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Vincent Lee</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://cdn.jsdelivr.net/gh/jackey-l/blog_static@master/img/background/vilige.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="(一)容器化实战--docker探索">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-06-04 16:18" pubdate>
        2021年6月4日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.2k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      64
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">(一)容器化实战--docker探索</h1>
            
            <div class="markdown-body">
              <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>近日，某甲方爸爸心血来潮，要求项目使用某PAAS采用容器化方式部署，没办法只能开整。大概看了一眼，这个PAAS是基于Kubernates之上进行了一层封装，由于之前对容器化方面经验并不是很多。经过2个月左右的学习与探索，总算一个人把传统项目给进行了容器化改造。这里也准备用一个小系列将这个过程记录下来，方便将来复盘与研究。</p>
<p><strong>注：由于原文在项目组内部发表，本系列已经过脱敏，行文润色不周之处请谅解。</strong></p>
<h4 id="上下文"><a href="#上下文" class="headerlink" title="上下文"></a>上下文</h4><blockquote>
<p>容器化技术采用Docker+Kubernates</p>
<p>项目抽象为一个典型的微服务项目</p>
<p>前后端分离Nginx+Tomcat</p>
<p>注册中心Eureka</p>
<p>网关Zuul</p>
<p>数据库 Mysql+Redis</p>
<p>2B项目，并发量不大。</p>
<p>待改造的节点大致如下</p>
<table>
<thead>
<tr>
<th>微服务</th>
<th>数据库</th>
<th>前端</th>
</tr>
</thead>
<tbody><tr>
<td>Registry（eureka）</td>
<td>Mysql</td>
<td>Front-end</td>
</tr>
<tr>
<td>Core(zuul)</td>
<td>Redis</td>
<td></td>
</tr>
<tr>
<td>SM（系统管理微服务）</td>
<td></td>
<td></td>
</tr>
</tbody></table>
</blockquote>
<h2 id="1-Docker是什么？"><a href="#1-Docker是什么？" class="headerlink" title="1.Docker是什么？"></a>1.Docker是什么？</h2><p>Docker是一种容器化技术,也是目前业界运行时主流的选择。从它的两句口号便可理解它的思想。</p>
<blockquote>
<h4 id="Build-ship-and-run"><a href="#Build-ship-and-run" class="headerlink" title="Build,ship and run."></a><strong>Build,ship and run.</strong></h4><h4 id="Build-once-run-anywhere"><a href="#Build-once-run-anywhere" class="headerlink" title="Build once,run anywhere."></a><strong>Build once,run anywhere.</strong></h4></blockquote>
<p>它可以看做一个超轻量级的虚拟机。把系统资源与应用打包成了一个镜像，大大降低了部署的难度。解决了软件与IAAS层耦合严重的问题，docker可以让开发工程师可以更专注于软件开发，而无须关注硬件层面问题。它还具有分层构建镜像、文件挂载等优秀特性。</p>
<p>关于Docker的优秀特性这里就不再赘述，同学们可以自行研究。<a target="_blank" rel="noopener" href="https://www.docker.com/">https://www.docker.com/</a></p>
<h2 id="2-安装Docker"><a href="#2-安装Docker" class="headerlink" title="2.    安装Docker"></a>2.    安装Docker</h2><h3 id="2-1-环境准备"><a href="#2-1-环境准备" class="headerlink" title="2.1    环境准备"></a>2.1    环境准备</h3><p>安装了Centos7的Linux</p>
<p>推荐安装DVD以上的版本，小版本容易缺少组件导致报错。</p>
<p>环境查看</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">系统内核是3.10以上的</span><br>[root@localhost /]# uname -r<br>3.10.0-327.el7.x86_64<br></code></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">系统版本</span><br>[root@localhost /]# cat /etc/os-release<br>NAME=&quot;CentOS Linux&quot;<br>VERSION=&quot;7 (Core)&quot;<br>ID=&quot;centos&quot;<br>ID_LIKE=&quot;rhel fedora&quot;<br>VERSION_ID=&quot;7&quot;<br>PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;<br>ANSI_COLOR=&quot;0;31&quot;<br>CPE_NAME=&quot;cpe:/o:centos:centos:7&quot;<br>HOME_URL=&quot;https://www.centos.org/&quot;<br>BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;<br><br>CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot;<br>CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot;<br>REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;<br>REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;<br></code></pre></td></tr></table></figure>

<h3 id="2-2-安装"><a href="#2-2-安装" class="headerlink" title="2.2    安装"></a>2.2    安装</h3><h4 id="2-2-1-联网安装docker"><a href="#2-2-1-联网安装docker" class="headerlink" title="2.2.1 联网安装docker"></a>2.2.1 联网安装docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 1、卸载docker</span><br>yum remove docker \<br>                  docker-client \<br>                  docker-client-latest \<br>                  docker-common \<br>                  docker-latest \<br>                  docker-latest-logrotate \<br>                  docker-logrotate \<br>                  docker-engine<br><span class="hljs-meta">#</span><span class="bash">删除资源</span> <br>rm -rf /var/lib/docker<br><span class="hljs-meta">#</span><span class="bash"> /var/lib/docker 是docker的默认工作路径！</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> 2、安装脚本工具</span><br>yum install -y yum-utils<br><span class="hljs-meta">#</span><span class="bash"> 3、设置镜像仓库</span><br>yum-config-manager \<br>    --add-repo \<br>    https://download.docker.com/linux/centos/docker-ce.repo<br><span class="hljs-meta">#</span><span class="bash"> 上述配置默认是国外docker官方的，速度慢不推荐</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">推荐使用国内的如阿里的</span><br>yum-config-manager \<br>    --add-repo \<br>    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">更新yum软件包索引</span><br>yum makecache fast<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">查看docker版本清单</span><br>yum list docker-ce --showduplicates|sort -r<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> 4、安装docker 有CE社区版和EE企业版之分，这里使用ce版即可</span><br><span class="hljs-meta">#</span><span class="bash"> 指定安装版本</span><br>yum install docker-ce-18.06.0.ce docker-ce-cli-18.06.0.ce containerd.io -y<br><span class="hljs-meta">#</span><span class="bash"> 安装最新版</span><br>yum install docker-ce docker-ce-cli containerd.io<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> 5、启动docker&amp;设置开机自启动</span><br>systemctl start docker &amp; systemctl enable docker<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> 6、使用docker version查看是否安装成功</span><br>docker version<br>[root@master01 /]# docker version<br>Client:<br> Version:           18.06.0-ce<br> API version:       1.38<br> Go version:        go1.10.3<br> Git commit:        0ffa825<br> Built:             Wed Jul 18 19:08:18 2018<br> OS/Arch:           linux/amd64<br> Experimental:      false<br><br>Server:<br> Engine:<br>  Version:          18.06.0-ce<br>  API version:      1.38 (minimum version 1.12)<br>  Go version:       go1.10.3<br>  Git commit:       0ffa825<br>  Built:            Wed Jul 18 19:10:42 2018<br>  OS/Arch:          linux/amd64<br>  Experimental:     false<br><span class="hljs-meta">  </span><br><span class="hljs-meta">#</span><span class="bash"> 7、配置docker 使用阿里云镜像加速</span><br>[root@master01 ~]# mkdir -p /etc/docker<br>[root@master01 ~]# tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;<br>&#123;<br>  &quot;registry-mirrors&quot;: [&quot;https://v16stybc.mirror.aliyuncs.com&quot;]<br>&#125;<br>EOF<br><span class="hljs-meta">#</span><span class="bash"> 	如果安装K8s 为了与高版本兼容顺便设置cgroup driver</span><br>cat &lt;&lt;EOF | sudo tee /etc/docker/daemon.json<br>&#123;<br>  &quot;registry-mirrors&quot;: [&quot;https://v16stybc.mirror.aliyuncs.com&quot;],<br>  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],<br>  &quot;log-driver&quot;: &quot;json-file&quot;,<br>  &quot;log-opts&quot;: &#123;<br>    &quot;max-size&quot;: &quot;100m&quot;<br>  &#125;,<br>  &quot;storage-driver&quot;: &quot;overlay2&quot;<br>&#125;<br>EOF<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">	重载配置文件&amp;重启服务</span><br>[root@master01 ~]# systemctl daemon-reload &amp;&amp; systemctl restart docker<br></code></pre></td></tr></table></figure>

<h4 id="2-2-2-离线安装Docker"><a href="#2-2-2-离线安装Docker" class="headerlink" title="2.2.2    离线安装Docker"></a>2.2.2    离线安装Docker</h4><p>下载离线安装包</p>
<p><a target="_blank" rel="noopener" href="https://download.docker.com/linux/static/stable/x86_64/">https://download.docker.com/linux/static/stable/x86_64/</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">1、解压上传的压缩包，解压后当前路径会生成一个docker目录，命令如下：</span><br><br>[root@118 install]# tar -zxvf docker-19.03.4.tgz<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">2、将docker服务注册为service</span><br><br>[root@118 install]# cp docker/* /usr/bin/<br><br>[root@118 install]# vim /etc/systemd/system/docker.service<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">将如下内容粘贴到docker.service</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">ps：需要root权限，如果权限被限制，可以通过ln -s 软连接指到 /etc/systemd/system/docker.service一样可以</span><br><br></code></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs shell">[Unit]<br><br>Description=Docker Application Container Engine<br><br>Documentation=https://docs.docker.com<br><br>After=network-online.target firewalld.service<br><br>Wants=network-online.target<br><br>[Service]<br><br>Type=notify<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> the default is not to use systemd <span class="hljs-keyword">for</span> cgroups because the delegate issues still</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> exists and systemd currently does not support the cgroup feature <span class="hljs-built_in">set</span> required</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> <span class="hljs-keyword">for</span> containers run by docker</span><br><br>ExecStart=/usr/bin/dockerd<br><br>ExecReload=/bin/kill -s HUP $MAINPID<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> Having non-zero Limit*s causes performance problems due to accounting overhead</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> <span class="hljs-keyword">in</span> the kernel. We recommend using cgroups to <span class="hljs-keyword">do</span> container-local accounting.</span><br><br>LimitNOFILE=infinity<br><br>LimitNPROC=infinity<br><br>LimitCORE=infinity<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> Uncomment TasksMax <span class="hljs-keyword">if</span> your systemd version supports it.</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> Only systemd 226 and above support this version.</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">TasksMax=infinity</span><br><br>TimeoutStartSec=0<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> <span class="hljs-built_in">set</span> delegate yes so that systemd does not reset the cgroups of docker containers</span><br><br>Delegate=yes<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> <span class="hljs-built_in">kill</span> only the docker process, not all processes <span class="hljs-keyword">in</span> the cgroup</span><br><br>KillMode=process<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> restart the docker process <span class="hljs-keyword">if</span> it exits prematurely</span><br><br>Restart=on-failure<br><br>StartLimitBurst=3<br><br>StartLimitInterval=60s<br><br> <br><br>[Install]<br><br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">4、启动</span><br><br>[root@118 install]# chmod +x /etc/systemd/system/docker.service             #添加文件权限并启动docker<br><br>[root@118 install]# systemctl daemon-reload                                                       #重载unit配置文件<br><br>[root@118 install]# systemctl start docker                                                             #启动Docker<br><br>[root@118 install]# systemctl enable docker.service                                           #设置开机自启<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">5、验证</span><br><br>[root@118 install]# docker version                                                         #查看Docker版本<br></code></pre></td></tr></table></figure>



<h3 id="2-3-运行helloworld镜像"><a href="#2-3-运行helloworld镜像" class="headerlink" title="2.3    运行helloworld镜像"></a>2.3    运行helloworld镜像</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 测试helloworld</span><br>[root@localhost ~]# docker run hello-world<br>Unable to find image &#x27;hello-world:latest&#x27; locally<br>latest: Pulling from library/hello-world<br>b8dfde127a29: Already exists<br>Digest: sha256:5122f6204b6a3596e048758cabba3c46b1c937a46b5be6225b835d091b90e46c<br>Status: Downloaded newer image for hello-world:latest<br><br>Hello from Docker!<br>This message shows that your installation appears to be working correctly.<br><br>To generate this message, Docker took the following steps:<br> 1. The Docker client contacted the Docker daemon.<br> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.<br>    (amd64)<br> 3. The Docker daemon created a new container from that image which runs the<br>    executable that produces the output you are currently reading.<br> 4. The Docker daemon streamed that output to the Docker client, which sent it<br>    to your terminal.<br><br>To try something more ambitious, you can run an Ubuntu container with:<br><span class="hljs-meta"> $</span><span class="bash"> docker run -it ubuntu bash</span><br><br>Share images, automate workflows, and more with a free Docker ID:<br> https://hub.docker.com/<br><br>For more examples and ideas, visit:<br> https://docs.docker.com/get-started/<br></code></pre></td></tr></table></figure>

<h3 id="2-4-卸载Docker"><a href="#2-4-卸载Docker" class="headerlink" title="2.4    卸载Docker"></a>2.4    卸载Docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 1、卸载docker</span><br>yum remove docker \<br>                  docker-client \<br>                  docker-client-latest \<br>                  docker-common \<br>                  docker-latest \<br>                  docker-latest-logrotate \<br>                  docker-logrotate \<br>                  docker-engine<br><span class="hljs-meta">#</span><span class="bash">删除资源</span> <br>rm -rf /var/lib/docker<br><span class="hljs-meta">#</span><span class="bash"> /var/lib/docker 是docker的默认工作路径！</span><br></code></pre></td></tr></table></figure>

<h2 id="3-使用Docker构建镜像"><a href="#3-使用Docker构建镜像" class="headerlink" title="3.    使用Docker构建镜像"></a>3.    使用Docker构建镜像</h2><blockquote>
<p>这里我们的公共镜像层设计如下</p>
<p>系统镜像：OS</p>
<p>Tomcat镜像：OS+JDK1.8+Tomcat</p>
<p>数据库镜像：OS+Mysql、OS+Redis</p>
<p>前端镜像：OS+Nginx</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jackey-l/blog_static@master/img/image-20211104174847655.png" srcset="https://cdn.jsdelivr.net/gh/jackey-l/blog_static@master/img/loading.gif" lazyload></p>
<h3 id="3-1-下载系统镜像层"><a href="#3-1-下载系统镜像层" class="headerlink" title="3.1    下载系统镜像层"></a>3.1    下载系统镜像层</h3><h3 id="3-2-构建基础镜像"><a href="#3-2-构建基础镜像" class="headerlink" title="3.2    构建基础镜像"></a>3.2    构建基础镜像</h3><p>这里以构建centos+jdk+tomcat为例，Docker registry 地址为192.168.60.128:5000</p>
<p>把压缩包上传至/home/docker 目录</p>
<p>解压缩并重命名文件夹</p>
<p><img src="https://cdn.jsdelivr.net/gh/jackey-l/blog_static@master/img/965a6ca74ca2ce615c100e72517acd91_274x183.png@900-0-90-f.png" srcset="https://cdn.jsdelivr.net/gh/jackey-l/blog_static@master/img/loading.gif" lazyload></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">拉取centos7镜像</span><br>[root@master01 docker]# docker pull centos:7<br>[root@master01 docker]# docker build -t 192.168.60.128:5000/centos-jdk-tomcat:0.0.1 .<br><span class="hljs-meta">#</span><span class="bash">参数-t name为设置标签名,格式为 仓库/标签名：版本</span><br><span class="hljs-meta">#</span><span class="bash">最后需要加上<span class="hljs-string">&quot;.&quot;</span>表示使用当前目录下的Dockerfile</span><br>Sending build context to Docker daemon    355MB<br>Step 1/11 : FROM centos:7<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> 8652b9f0cb4c</span><br>Step 2/11 : MAINTAINER Vincent &quot;vicentlee@email.com&quot;<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> Running <span class="hljs-keyword">in</span> bf344a418629</span><br>Removing intermediate container bf344a418629<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> 117e4ac1e435</span><br>Step 3/11 : RUN mkdir -p /opt/java/jre1.8.0_232<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> Running <span class="hljs-keyword">in</span> 0b56b3cf1adc</span><br>Removing intermediate container 0b56b3cf1adc<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> c7730a840847</span><br>Step 4/11 : ADD jdk /opt/java/_jre1.8.0_232<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> f03745da59bd</span><br>Step 5/11 : RUN mkdir -p /opt/java/OpenAS_Tomcat_7<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> Running <span class="hljs-keyword">in</span> 2924c5125a05</span><br>Removing intermediate container 2924c5125a05<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> ddac7fd13ad6</span><br>Step 6/11 : ADD tomcat /opt/java/OpenAS_Tomcat_7<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> 0f83265f4f3d</span><br>Step 7/11 : ENV JAVA_HOME /opt/java/_jre1.8.0_232<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> Running <span class="hljs-keyword">in</span> c66572d4a875</span><br>Removing intermediate container c66572d4a875<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> 560f2e8a82cb</span><br>Step 8/11 : ENV CATALINA_HOME /opt/java/OpenAS_Tomcat_7<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> Running <span class="hljs-keyword">in</span> c626d143b379</span><br>Removing intermediate container c626d143b379<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> 2253de1e357b</span><br>Step 9/11 : ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/bin<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> Running <span class="hljs-keyword">in</span> 310b6924ab32</span><br>Removing intermediate container 310b6924ab32<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> 89dd4d21f44a</span><br>Step 10/11 : EXPOSE 8080<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> Running <span class="hljs-keyword">in</span> c876584c135d</span><br>Removing intermediate container c876584c135d<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> 23fe401b8e9e</span><br>Step 11/11 : CMD [&quot;/opt/java/OpenAS_Tomcat_7/bin/catalina.sh&quot;,&quot;run&quot;]<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> Running <span class="hljs-keyword">in</span> 3f7ecde682c5</span><br>Removing intermediate container 3f7ecde682c5<br><span class="hljs-meta"> ---&gt;</span><span class="bash"> 6a569cbc874c</span><br>Successfully built 6a569cbc874c<br>Successfully tagged 192.168.60.128:5000/centos-jdk-tomcat:0.0.1<br></code></pre></td></tr></table></figure>



<h3 id="3-3-DockerFile构建镜像"><a href="#3-3-DockerFile构建镜像" class="headerlink" title="3.3    DockerFile构建镜像"></a>3.3    DockerFile构建镜像</h3><p>微服务镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">基于Tomcat:alpine</span><br>FROM tomcat:alpine<br><span class="hljs-meta">#</span><span class="bash">作者</span><br>MAINTAINER young&lt;yyggmmshen@foxmail.com&gt;<br><span class="hljs-meta">#</span><span class="bash">声明变量</span><br>ENV TOMCATPATH /usr/local/tomcat<br><span class="hljs-meta">#</span><span class="bash">设置工作目录</span><br>WORKDIR $&#123;TOMCATPATH&#125;/webapps<br><span class="hljs-meta">#</span><span class="bash">删除ROOT目录里的所有文件</span><br>RUN rm -rf *<br><span class="hljs-meta">#</span><span class="bash">导入war包</span><br>COPY hello.war ./hello.war<br><span class="hljs-meta">#</span><span class="bash">创建ROOT目录</span><br>RUN mkdir ROOT<br><span class="hljs-meta">#</span><span class="bash">将war包解压到ROOT目录下</span><br>RUN unzip ./hello.war -d ./ROOT<br><span class="hljs-meta">#</span><span class="bash">删除war包</span><br>RUN rm -rf hello.war<br><span class="hljs-meta">#</span><span class="bash">暴露接口</span><br>EXPOSE 8080<br><span class="hljs-meta">#</span><span class="bash">启动Tomcat</span><br>CMD [&quot;../bin/catalina.sh&quot;,&quot;run&quot;]<br><br></code></pre></td></tr></table></figure>



<h3 id="3-4-使用DockerHub"><a href="#3-4-使用DockerHub" class="headerlink" title="3.4    使用DockerHub"></a>3.4    使用DockerHub</h3><p>假设注册DockerHub账号为tom</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">注册或拉取私人镜像都需要登录</span><br>[root@node02 ~]# docker login<br>Login with your Docker ID to push and pull images from Docker Hub. If you don&#x27;t have a Docker ID, head over to https://hub.docker.com to create one.<br>Username: tom<br>Password:<br>WARNING! Your password will be stored unencrypted in /root/.docker/config.json.<br>Configure a credential helper to remove this warning. See<br>https://docs.docker.com/engine/reference/commandline/login/#credentials-store<br><br>Login Succeeded<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">镜像tag需要按照  	用户名/镜像名：版本号的格式命名</span><br>[root@node01 ~]# docker tag hello-world pperfectt/helloworld_m<br><span class="hljs-meta">#</span><span class="bash">push 镜像</span><br>[root@node01 ~]# docker push tom/helloworld_m<br>The push refers to repository [docker.io/pperfectt/helloworld_m]<br>f22b99068db9: Mounted from library/hello-world<br>latest: digest: sha256:1b26826f602946860c279fce658f31050cff2c596583af237d971f4629b57792 size: 525<br><span class="hljs-meta">#</span><span class="bash">在另一节点docker login之后拉取镜像</span><br>[root@node02 ~]# docker pull tom/helloworld_m:latest<br>latest: Pulling from pperfectt/helloworld_m<br>Digest: sha256:1b26826f602946860c279fce658f31050cff2c596583af237d971f4629b57792<br>Status: Downloaded newer image for pperfectt/helloworld_m:latest<br></code></pre></td></tr></table></figure>

<h2 id="4-搭建私仓Docker-Registry"><a href="#4-搭建私仓Docker-Registry" class="headerlink" title="4.    搭建私仓Docker Registry"></a>4.    搭建私仓Docker Registry</h2><p>实际情况中，大多数项目并不会将自己的镜像放在docker官方镜像仓，这种情况，我们需要搭建自己的镜像私仓。</p>
<h4 id="4-1-获取registry镜像"><a href="#4-1-获取registry镜像" class="headerlink" title="4.1    获取registry镜像"></a>4.1    获取registry镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@master01 docker]# docker pull registry:2<br></code></pre></td></tr></table></figure>

<h4 id="4-2-运行registry容器"><a href="#4-2-运行registry容器" class="headerlink" title="4.2    运行registry容器"></a>4.2    运行registry容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@dockerA ~]# docker run  -itd --name registry --restart=always  -p 5000:5000 -v /opt/registry:/var/lib/registry registry:2<br><br>//创建一个registry容器来运行registry服务；<br>//-p：端口映射（前面是宿主机端口：后面是容器暴露的端口）；<br>//-v：挂载目录（前面是宿主机的目录：后面的是容器的目录）自动创建宿主机的目录；<br>//--restart=always：随docker服务的启动而启动！<br></code></pre></td></tr></table></figure>

<h4 id="4-3-验证"><a href="#4-3-验证" class="headerlink" title="4.3    验证"></a>4.3    验证</h4><p>往私仓上推送镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">按照规则重命名要推送的镜像，</span><br><span class="hljs-meta">#</span><span class="bash">注：私有仓库镜像的命名规则：192.168.45.129:5000/XXX（宿主机的IP:5000端口/镜像名称:版本）</span><br>[root@master01 docker]# docker tag nginx:latest 192.168.60.128:5000/my_nginx:1.0<br><span class="hljs-meta">#</span><span class="bash">推送</span><br>[root@master01 docker]# docker push 192.168.60.128:5000/my_nginx<br><span class="hljs-meta">#</span><span class="bash">查看私藏镜像清单</span><br>[root@master01 docker]# curl -XGET http://192.168.60.128:5000/v2/_catalog<br>&#123;&quot;repositories&quot;:[&quot;my_hello&quot;,&quot;my_nginx&quot;]&#125;<br></code></pre></td></tr></table></figure>

<p>在其他客户端下载镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@node02 ~]# docker pull 192.168.60.128:5000/my_nginx<br>Using default tag: latest<br>Error response from daemon: Get https://192.168.60.128:5000/v2/: http: server gave HTTP response to HTTPS client<br><span class="hljs-meta">#</span><span class="bash">报错https请求错误，设置跳过https验证</span><br>[root@master01 docker]# cat /etc/docker/daemon.json<br>&#123;<br>  &quot;insecure-registries&quot;:[&quot;192.168.60.128:5000&quot;],<br>  &quot;registry-mirrors&quot;: [&quot;http://192.168.60.128:5000&quot;],<br>  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],<br>  &quot;log-driver&quot;: &quot;json-file&quot;,<br>  &quot;log-opts&quot;: &#123;<br>    &quot;max-size&quot;: &quot;100m&quot;<br>  &#125;,<br>  &quot;storage-driver&quot;: &quot;overlay2&quot;<br>&#125;<br>[root@node02 ~]# systemctl daemon-reload &amp;&amp; systemctl restart docker<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">成功拉取</span><br>[root@node02 ~]# docker pull 192.168.60.128:5000/my_nginx:1.0<br>1.0: Pulling from my_nginx<br>Digest: sha256:61191087790c31e43eb37caa10de1135b002f10c09fdda7fa8a5989db74033aa<br>Status: Downloaded newer image for 192.168.60.128:5000/my_nginx:1.0<br><br></code></pre></td></tr></table></figure>

<h4 id="4-4-删除Docker-Registry"><a href="#4-4-删除Docker-Registry" class="headerlink" title="4.4    删除Docker Registry"></a>4.4    删除Docker Registry</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@master01 docker]# docker container stop registry &amp;&amp; docker container rm -v registry<br>registry<br></code></pre></td></tr></table></figure>



<h2 id="5-Docker常用命令"><a href="#5-Docker常用命令" class="headerlink" title="5.    Docker常用命令"></a>5.    Docker常用命令</h2><h3 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs she">docker version	#显示docker的版本<br>docker info		#显示docker的系统信息，包括镜像和容器的数量<br>docker --help	#帮助命令<br></code></pre></td></tr></table></figure>

<p>帮助文档的地址：<a target="_blank" rel="noopener" href="https://docs.docker.com/">https://docs.docker.com/</a></p>
<h3 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h3><h4 id="查看所有本地的主机上的镜像"><a href="#查看所有本地的主机上的镜像" class="headerlink" title="查看所有本地的主机上的镜像"></a>查看所有本地的主机上的镜像</h4><p><strong>docker images</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs she">[root@localhost ~]# docker images<br>REPOSITORY    TAG       IMAGE ID       CREATED        SIZE<br>hello-world   latest    d1165f221234   2 months ago   13.3kB<br>[root@localhost ~]#<br><br>#解释<br>REPOSITORY	镜像的仓库源<br>TAG			镜像的标签<br>IMAGE ID	镜像的id<br>CREATED 	镜像的创建时间<br>SIZE		镜像的大小<br><br>#可选项<br>Options:<br>  -a, --all             # 列出所有镜像<br>  -f, --filter filter   # 过滤镜像<br>  -q, --quiet          只显示镜像ID<br>  <br>#显示所有镜像的ID<br>[root@localhost ~]# docker images -aq<br>d1165f221234<br><br></code></pre></td></tr></table></figure>

<h4 id="搜索镜像"><a href="#搜索镜像" class="headerlink" title="搜索镜像"></a>搜索镜像</h4><p>DockerHub <a target="_blank" rel="noopener" href="https://www.docker.com/products/docker-hub">https://www.docker.com/products/docker-hub</a></p>
<p><strong>docker search</strong> </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost ~]# docker search mysql<br>NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED<br>mysql                             MySQL is a widely used, open-source relation…   10921     [OK]<br>mariadb                           MariaDB Server is a high performing open sou…   4125      [OK]<br>mysql/mysql-server                Optimized MySQL Server Docker images. Create…   810                  [OK]<br>percona                           Percona Server is a fork of the MySQL relati…   539  <br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> --filter=STARS=3000 <span class="hljs-comment">#过滤，搜索出来的镜像收藏STARS数量大于3000的</span></span><br>Options:<br>  -f, --filter filter   Filter output based on conditions provided<br>      --format string   Pretty-print search using a Go template<br>      --limit int       Max number of search results (default 25)<br>      --no-trunc        Don&#x27;t truncate output<br>      <br>[root@iz2zeak7sgj6i7hrb2g862z ~]# docker search mysql --filter=STARS=3000<br>NAME        DESCRIPTION         STARS            OFFICIAL        AUTOMATED<br>mysql       MySQL IS ...        9520             [OK]                <br>mariadb     MariaDB IS ...      3456             [OK] <br></code></pre></td></tr></table></figure>

<h4 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h4><p><strong>docker pull</strong> </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 下载镜像 docker pull 镜像名[:tag]</span><br>➜ ~ docker pull tomcat:8<br>8: Pulling from library/tomcat #如果不写tag，默认就是latest<br>90fe46dd8199: Already exists #分层下载： docker image 的核心 联合文件系统<br>35a4f1977689: Already exists<br>bbc37f14aded: Already exists<br>74e27dc593d4: Already exists<br>93a01fbfad7f: Already exists<br>1478df405869: Pull complete<br>64f0dd11682b: Pull complete<br>68ff4e050d11: Pull complete<br>f576086003cf: Pull complete<br>3b72593ce10e: Pull complete<br>Digest: sha256:0c6234e7ec9d10ab32c06423ab829b32e3183ba5bf2620ee66de866df640a027<br><span class="hljs-meta">#</span><span class="bash"> 签名 防伪</span><br>Status: Downloaded newer image for tomcat:8<br>docker.io/library/tomcat:8 #真实地址<br><span class="hljs-meta">#</span><span class="bash">等价于</span><br>docker pull tomcat:8<br>docker pull docker.io/library/tomcat:8<br><br></code></pre></td></tr></table></figure>

<h4 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker build -t test .<br></code></pre></td></tr></table></figure>

<h4 id="运行镜像"><a href="#运行镜像" class="headerlink" title="运行镜像"></a>运行镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -dit -p 80:8022 --rm test<br><span class="hljs-meta">#</span><span class="bash"> -dit 后台运行容器 -it 容器启动后进入容器</span><br><span class="hljs-meta">#</span><span class="bash"> --rm 容器停止后删除容器</span><br><span class="hljs-meta">#</span><span class="bash"> -p 宿主端口号：容器端口号 映射宿主机与容器端口</span><br></code></pre></td></tr></table></figure>

<h4 id="删除镜像"><a href="#删除镜像" class="headerlink" title="删除镜像"></a>删除镜像</h4><p><strong>docker rmi</strong> </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost ~]# docker rmi -f 镜像id # 删除指定镜像<br>[root@localhost ~]# docker rmi -f 镜像id 镜像id 镜像id # 删除指定镜像<br>[root@localhost ~]# docker rmi -f $(docker images -aq)镜像id # 删除符合条件镜像（全部）<br></code></pre></td></tr></table></figure>

<h4 id="导出镜像"><a href="#导出镜像" class="headerlink" title="导出镜像"></a>导出镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@storage01 tmp]# docker save -o centos.tar centos:7<br></code></pre></td></tr></table></figure>

<h4 id="导入镜像"><a href="#导入镜像" class="headerlink" title="导入镜像"></a>导入镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@storage01 tmp]# docker load -i centos.tar<br></code></pre></td></tr></table></figure>

<h3 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run 		镜像id 新建容器并启动<br>docker ps 		列出所有运行的容器 docker container list<br>docker rm 		容器id 删除指定容器<br>docker start 	容器id #启动容器<br>docker restart	容器id #重启容器<br>docker stop 	容器id #停止当前正在运行的容器<br>docker kill 	容器id #强制停止当前容器<br></code></pre></td></tr></table></figure>

<blockquote>
<p>说明：我们有了镜像才可以创建容器，Linux，下载centos镜像来学习</p>
</blockquote>
<h4 id="容器生命周期管理命令"><a href="#容器生命周期管理命令" class="headerlink" title="容器生命周期管理命令"></a>容器生命周期管理命令</h4><h5 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker create<br></code></pre></td></tr></table></figure>

<h5 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker start<br></code></pre></td></tr></table></figure>

<h5 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run [可选参数] image | docker container run [可选参数] image <br><span class="hljs-meta">#</span><span class="bash">参数说明</span><br>--name=&quot;Name&quot;		#容器名字 tomcat01 tomcat02 用来区分容器<br>-d					#后台方式运行<br>-it 				#使用交互方式运行，进入容器查看内容<br>-p					#指定容器的端口 -p 8080(宿主机):8080(容器)<br>		-p ip:主机端口:容器端口<br>		-p 主机端口:容器端口(常用)<br>		-p 容器端口<br>		容器端口<br>-P(大写) 				随机指定端口<br><span class="hljs-meta">#</span><span class="bash">创建一个nginx容器</span><br>[root@localhost ~]# docker run -d -p 80:80 --name nginx1 nginx<br>60d8cc8576ab56239eab28d106ff09758430fa4aeab2ad240dc23472ade9ebe3<br>[root@localhost ~]# docker ps<br>CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                               NAMES<br>60d8cc8576ab   nginx     &quot;/docker-entrypoint.…&quot;   16 seconds ago   Up 14 seconds   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   nginx1<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">验证</span><br>[root@localhost ~]# curl localhost<br>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;title&gt;Welcome to nginx!&lt;/title&gt;<br>&lt;style&gt;<br>    body &#123;<br>        width: 35em;<br>        margin: 0 auto;<br>        font-family: Tahoma, Verdana, Arial, sans-serif;<br>    &#125;<br>&lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;<br>&lt;p&gt;If you see this page, the nginx web server is successfully installed and<br>working. Further configuration is required.&lt;/p&gt;<br><br>&lt;p&gt;For online documentation and support please refer to<br>&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;<br>Commercial support is available at<br>&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;<br><br>&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>

<h5 id="停止一个运行的容器"><a href="#停止一个运行的容器" class="headerlink" title="停止一个运行的容器"></a>停止一个运行的容器</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker stop<br></code></pre></td></tr></table></figure>

<h5 id="删除一个处于终止状态的容器"><a href="#删除一个处于终止状态的容器" class="headerlink" title="删除一个处于终止状态的容器"></a>删除一个处于终止状态的容器</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker rm<br></code></pre></td></tr></table></figure>

<h5 id="杀死容器进程"><a href="#杀死容器进程" class="headerlink" title="杀死容器进程"></a>杀死容器进程</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker kill<br></code></pre></td></tr></table></figure>

<h4 id="查询容器"><a href="#查询容器" class="headerlink" title="查询容器"></a>查询容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker ps [可选参数]<br><br>Options:<br>  -a, --all             列出所有容器<br>  -f, --filter filter   筛选过滤<br>  -n, --last int        列出最后创建的n个容器，包括所有状态的<br>  -l, --latest          列出最后创建的容器<br>  -q, --quiet           仅显示容器id<br>  -s, --size            显示文件大小<br>  <br>[root@localhost ~]# docker ps -a<br>CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                               NAMES<br>60d8cc8576ab   nginx     &quot;/docker-entrypoint.…&quot;   8 minutes ago   Up 8 minutes   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   nginx1<br></code></pre></td></tr></table></figure>

<h4 id="操作容器"><a href="#操作容器" class="headerlink" title="操作容器"></a>操作容器</h4><h4 id="进入容器"><a href="#进入容器" class="headerlink" title="进入容器"></a>进入容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">进入容器方法1 attach命令，直接进入已启动的容器终端，不会启动新的进程。</span><br>docker attach [OPTIONS]CONTAINER<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">进入容器方法2 <span class="hljs-built_in">exec</span>命令，在容器中打开新的终端</span><br>docker exec [OPTIONS]CONTAINER COMMAND[ARG...]<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">如果报错无法进入，一般的容器都可以执行/bin/bash，但也有部分容器没有，那么我们可以用sh来代替</span><br>[root@master01 docker]# docker exec -it 933cb70e96c6 /bin/bash<br>OCI runtime exec failed: exec failed: container_linux.go:348: starting container process caused &quot;exec: \&quot;/bin/bash\&quot;: stat /bin/bash: no such file or directory&quot;: unknown<br><br>[root@master01 docker]# docker exec -it 933cb70e96c6 sh<br>/ # ls<br></code></pre></td></tr></table></figure>

<h4 id="从容器内拷贝文件到宿主机上"><a href="#从容器内拷贝文件到宿主机上" class="headerlink" title="从容器内拷贝文件到宿主机上"></a>从容器内拷贝文件到宿主机上</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker cp &lt;containerId&gt;:/file/path/within/container /host/path/target<br></code></pre></td></tr></table></figure>

<h4 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker rm -f [容器ID] <br>docker rm -f b2c70821b7aa <br><span class="hljs-meta">#</span><span class="bash">-f 强制删除</span><br></code></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 清楚镜像缓存</span><br>docker system prune<br></code></pre></td></tr></table></figure>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AE%B9%E5%99%A8%E5%8C%96%E6%8A%80%E6%9C%AF/">容器化技术</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E5%AE%B9%E5%99%A8%E5%8C%96/">容器化</a>
                    
                      <a class="hover-with-bg" href="/tags/Docker/">Docker</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/06/04/containerization2-k8s/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">(二)容器化实战--K8s探索</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"aABg0z1pmK0PBcdmxgbNq9HH-gzGzoHsz","appKey":"VmLcKlwx0DLrqXB6ubPaCo9B","placeholder":"说点什么","path":"window.location.pathname","avatar":"retro","meta":["nick","mail","link"],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/","emojiMaps":{"smile":"e3/2018new_weixioa02_org.png","lovely":"09/2018new_keai_org.png"},"enableQQ":true,"requiredFields":[]},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/js/local-search.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>












  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
